{"ast":null,"code":"var _jsxFileName = \"D:\\\\Users\\\\MAYANK\\\\DEV Flow\\\\devflow-project\\\\client\\\\src\\\\context\\\\SocketProvider.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport io from 'socket.io-client';\nimport { AuthContext } from './AuthProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const SocketContext = /*#__PURE__*/createContext(null);\nexport const SocketProvider = ({\n  children\n}) => {\n  _s();\n  const [socket, setSocket] = useState(null);\n  const {\n    isAuthenticated,\n    user\n  } = useContext(AuthContext);\n  useEffect(() => {\n    if (isAuthenticated) {\n      const newSocket = io('http://localhost:5000', {\n        query: {\n          token: localStorage.getItem('token')\n        }\n      });\n      setSocket(newSocket);\n      return () => {\n        newSocket.disconnect();\n      };\n    } else if (socket) {\n      socket.disconnect();\n      setSocket(null);\n    }\n  }, [isAuthenticated, user, socket]); // Added 'socket' to dependency array\n\n  return /*#__PURE__*/_jsxDEV(SocketContext.Provider, {\n    value: socket,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 5\n  }, this);\n};\n_s(SocketProvider, \"nvm5/A6bf/6p0zwtE6ctZRjWD5M=\");\n_c = SocketProvider;\nvar _c;\n$RefreshReg$(_c, \"SocketProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","io","AuthContext","jsxDEV","_jsxDEV","SocketContext","SocketProvider","children","_s","socket","setSocket","isAuthenticated","user","newSocket","query","token","localStorage","getItem","disconnect","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Users/MAYANK/DEV Flow/devflow-project/client/src/context/SocketProvider.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\r\nimport io from 'socket.io-client';\r\nimport { AuthContext } from './AuthProvider';\r\n\r\nexport const SocketContext = createContext(null);\r\n\r\nexport const SocketProvider = ({ children }) => {\r\n  const [socket, setSocket] = useState(null);\r\n  const { isAuthenticated, user } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      const newSocket = io('http://localhost:5000', {\r\n        query: { token: localStorage.getItem('token') },\r\n      });\r\n\r\n      setSocket(newSocket);\r\n\r\n      return () => {\r\n        newSocket.disconnect();\r\n      };\r\n    } else if (socket) {\r\n      socket.disconnect();\r\n      setSocket(null);\r\n    }\r\n  }, [isAuthenticated, user, socket]); // Added 'socket' to dependency array\r\n\r\n  return (\r\n    <SocketContext.Provider value={socket}>\r\n      {children}\r\n    </SocketContext.Provider>\r\n  );\r\n};\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC7E,OAAOC,EAAE,MAAM,kBAAkB;AACjC,SAASC,WAAW,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7C,OAAO,MAAMC,aAAa,gBAAGR,aAAa,CAAC,IAAI,CAAC;AAEhD,OAAO,MAAMS,cAAc,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC9C,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM;IAAEa,eAAe;IAAEC;EAAK,CAAC,GAAGZ,UAAU,CAACE,WAAW,CAAC;EAEzDH,SAAS,CAAC,MAAM;IACd,IAAIY,eAAe,EAAE;MACnB,MAAME,SAAS,GAAGZ,EAAE,CAAC,uBAAuB,EAAE;QAC5Ca,KAAK,EAAE;UAAEC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO;QAAE;MAChD,CAAC,CAAC;MAEFP,SAAS,CAACG,SAAS,CAAC;MAEpB,OAAO,MAAM;QACXA,SAAS,CAACK,UAAU,CAAC,CAAC;MACxB,CAAC;IACH,CAAC,MAAM,IAAIT,MAAM,EAAE;MACjBA,MAAM,CAACS,UAAU,CAAC,CAAC;MACnBR,SAAS,CAAC,IAAI,CAAC;IACjB;EACF,CAAC,EAAE,CAACC,eAAe,EAAEC,IAAI,EAAEH,MAAM,CAAC,CAAC,CAAC,CAAC;;EAErC,oBACEL,OAAA,CAACC,aAAa,CAACc,QAAQ;IAACC,KAAK,EAAEX,MAAO;IAAAF,QAAA,EACnCA;EAAQ;IAAAc,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACa,CAAC;AAE7B,CAAC;AAAChB,EAAA,CA1BWF,cAAc;AAAAmB,EAAA,GAAdnB,cAAc;AAAA,IAAAmB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}